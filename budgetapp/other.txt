
from flask_session import Session

# user session
app.config["SESSION_PERMANENT"] = False
app.config["SESSION_TYPE"] = "filesystem"
Session(app)



# routes



@app.route("/budget", methods=["GET", "POST"])
@login_required
def budget():
    user_id = session["user_id"]
    if request.method == "POST":
        type = request.form.get("type")
        amount_budget = request.form.get("amount")
        input_date = datetime.today()
        db.execute("INSERT INTO budget (user_id, type, amount_budget, input_date) VALUES (?, ?, ?, ?)", user_id, type, amount_budget, input_date)
        return redirect("/budget")
    else:
        budget = db.execute("SELECT * FROM budget WHERE user_id = ?", user_id)
        return render_template("/budget.html", budget=budget)

